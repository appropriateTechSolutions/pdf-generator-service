# PDF Generation Microservice

A Python-based microservice that converts JSON data to PDF documents.

## Features

- REST API for PDF generation from JSON
- Input validation with Pydantic
- HTML template rendering with Jinja2
- PDF download support
- No external system dependencies

## Tech Stack

- **FastAPI** - Web framework
- **xhtml2pdf** - PDF generation
- **Jinja2** - Template rendering
- **Pydantic** - Data validation
- **Uvicorn** - ASGI server

## Setup Instructions

### Prerequisites
- Python 3.8 or higher
- pip package manager

### Installation Steps

1. **Clone the repository:**
```bash
git clone <repository-url>
cd pdf_service
```

2. **Create virtual environment:**
```bash
python -m venv venv
```

3. **Activate virtual environment:**

Windows:
```bash
venv\Scripts\activate
```

Linux/Mac:
```bash
source venv/bin/activate
```

4. **Install dependencies:**
```bash
pip install -r requirements.txt
```

## How to Run

Start the development server:
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

The API will be available at: **http://localhost:8000**

Access API documentation at: **http://localhost:8000/docs**

## Example API Request

### Request Body (JSON)
```json
{
  "title": "Price List",
  "date": "2025-02-10",
  "items": [
    {"name": "Item A", "price": 120},
    {"name": "Item B", "price": 150},
    {"name": "Item C", "price": 89.99}
  ],
  "footer_text": "Generated by Appropriate Tech Solutions"
}
```

### Response
- **Content-Type:** `application/pdf`
- **File Download:** `price_list_2025-02-10.pdf`

## Example cURL Command

```bash
curl -X POST "http://localhost:8000/generate-pdf" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Monthly Price List",
    "date": "2025-02-10",
    "items": [
      {"name": "Product A", "price": 120.50},
      {"name": "Product B", "price": 150.75},
      {"name": "Product C", "price": 89.99}
    ],
    "footer_text": "Thank you for your business"
  }' \
  --output output.pdf
```

## Design Choices

This microservice follows a modular architecture with clear separation of concerns. FastAPI was chosen for its automatic API documentation, built-in validation, and high performance. The service layer is separated from routing logic to maintain clean code organization and testability. xhtml2pdf was selected over WeasyPrint and ReportLab because it provides a good balance between ease of use and functionality without requiring complex system dependencies, making deployment simpler across different environments. Jinja2 templates allow for flexible HTML generation while maintaining separation between presentation and business logic. Pydantic schemas ensure type safety and automatic request validation at the API boundary, reducing the need for manual validation code and providing clear error messages to API consumers.
